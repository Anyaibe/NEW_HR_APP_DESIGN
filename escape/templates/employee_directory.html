{% extends 'layout.html' %}
{% load static %}

{% block title %}Employee Directory{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/employee_directory.css' %}">
    <link rel="stylesheet" href="{% static 'css/all.min.css' %}">
{% endblock %}

{% block content %}
<div class="centered-wrapper">
    <div id="employee-directory-section" class="content-section">
        <section class="stats-cards">
            <div class="card">
                <div class="card-inner">
                    <img src="{% static 'images/user-group.svg' %}" alt="Total Employee" class="stats-icon">
                    <div class="text">
                        <h3>Total Employee</h3>
                        <p>20</p>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-inner">
                    <img src="{% static 'images/user-add.svg' %}" alt="New Employee" class="stats-icon">
                    <div class="text">
                        <h3>New Employee</h3>
                        <p>3 in January</p>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-inner">
                    <img src="{% static 'images/male 1.svg' %}" alt="Departments" class="stats-icon">
                    <div class="text">
                        <h3>Departments</h3>
                        <p>5</p>
                    </div>
                </div>
            </div>
            <div class="card">
                <div class="card-inner">
                    <img src="{% static 'images/clock-05.svg' %}" alt="On Leave" class="stats-icon">
                    <div class="text">
                        <h3>On Leave</h3>
                        <p>5</p>
                    </div>
                </div>
            </div>
        </section>


        <section class="employee-directory">
            <h2>Employee Directory</h2>
            <div class="directory-controls">
                <input type="search" placeholder="Search by name, role, department..." class="directory-search" />
                <button class="filter-btn">Filter &nbsp; <i class="fa-solid fa-arrow-down-wide-short"></i></button>
                <button class="export-btn">Export CSV &nbsp; <i class="fas fa-upload"></i></button>
                <button class="filter-btn">Add Employee &nbsp; <i class="fas fa-user-plus"></i></button>
            </div>

            <table class="employee-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Employee</th>
                        <th>Gender</th>
                        <th>Primary Role</th>
                        <th>Department</th>
                        <th>Employment Type</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Update your clickable rows to include data-image attribute -->
                    <tr class="clickable-row" 
                        data-name="Ali Balogun" 
                        data-role="Data Analyst" 
                        data-email="ali@escapetechnet"
                        data-image="{% static 'images/ali-profile.jpg' %}">
                        <td>05/06</td>
                        <td>Ali Balogun</td>
                        <td>M</td>
                        <td>Data Analyst</td>
                        <td>Mhino</td>
                        <td><span class="employment-type full-time">Full-Time</span></td>
                        <td><span class="status in-training">in-training</span></td>
                    </tr>

                    <!-- For rows without custom images, you can omit data-image and it will use default -->
                    <tr class="clickable-row" 
                        data-name="Aisha Doe" 
                        data-role="HR Manager" 
                        data-email="aisha@company.com"
                        data-image="{% static 'images/avatar.svg' %}">
                        <td>13/01</td>
                        <td>Aisha Doe</td>
                        <td>F</td>
                        <td>HR Manager</td>
                        <td>E-GMP</td>
                        <td><span class="employment-type full-time">Full-Time</span></td>
                        <td><span class="status present">Present</span></td>
                    </tr>
                </tbody>
            </table>

            <div class="pagination">
                <button class="pagination-btn">&lt;</button>
                <button class="pagination-btn active">1</button>
                <button class="pagination-btn">2</button>
                <button class="pagination-btn">3</button>
                <button class="pagination-btn">&gt;</button>
            </div>
        </section>
    </div>

    <!-- Enhanced Profile section (hidden by default) -->
<section class="profile hidden">
    <!-- Profile Header -->
    <div class="profile-header">
        <div class="profile-picture">
            <img id="profile-image" src="{% static 'images/avatar.svg' %}" alt="Profile Picture">
        </div>
        <div class="profile-info">
            <h2 id="profile-name">Employee Name</h2>
            <div class="profile-details">
                <p><i class="fas fa-briefcase"></i> <span id="profile-role">Role</span></p>
                <p><i class="fas fa-envelope"></i> <span id="profile-email">Email</span></p>
            </div>
        </div>
        <button class="edit-profile">
            <i class="fas fa-edit"></i> Edit Profile
        </button>
    </div>

    <!-- Profile Navigation Sidebar -->
    <div class="profile-content">
        <div class="profile-sidebar">
            <div class="profile-nav">
                <button class="profile-nav-btn active" data-tab="profile-tab">
                    <i class="fas fa-user"></i> Profile
                </button>
                <button class="profile-nav-btn" data-tab="leave-tab">
                    <i class="fas fa-calendar-alt"></i> Leave
                </button>
            </div>
        </div>

        <!-- Profile Tab Content -->
        <div class="profile-main">
            <!-- Profile Tab -->
            <!-- Profile Tab Content - This contains both info sections -->
            <div id="profile-tab" class="profile-tab-content active">
                <!-- Sub-tabs for Personal and Professional Info -->
                <div class="info-tabs">
                    <button class="info-tab-btn active" data-info-tab="personal-info">
                        <i class="fas fa-user"></i> Personal Information
                    </button> 
                    <button class="info-tab-btn" data-info-tab="professional-info">
                        <i class="fas fa-briefcase"></i> Professional Information
                    </button>
                </div>
            
                <!-- Personal Information Section -->
                <div id="personal-info" class="info-content active">
                    <div class="info-grid">
                        <div class="info-item">
                            <label>First Name</label>
                            <span id="first-name">-</span>
                        </div>
                        <div class="info-item">
                            <label>Last Name</label>
                            <span id="last-name">-</span>
                        </div>

                        <div class="info-item">
                            <label>Mobile Number</label>
                            <span id="mobile-number">-</span>
                        </div>
                        <div class="info-item">
                            <label>Email Address</label>
                            <span id="email-address">-</span>
                        </div>

                        <div class="info-item">
                            <label>Date of Birth</label>
                            <span id="date-of-birth">-</span>
                        </div>
                        <div class="info-item">
                            <label>Marital Status</label>
                            <span id="marital-status">-</span>
                        </div>

                        <div class="info-item">
                            <label>Gender</label>
                            <span id="gender">-</span>
                        </div>
                        <div class="info-item">
                            <label>Nationality</label>
                            <span id="nationality">-</span>
                        </div>
                    
                        <!-- Full width items -->
                        <div class="info-item full-width">
                            <label>Home Address</label>
                            <span id="home-address">-</span>
                        </div>

                        <div class="info-item">
                            <label>City</label>
                            <span id="city">-</span>
                        </div>
                        <div class="info-item">
                            <label>State</label>
                            <span id="state">-</span>
                        </div>
                    </div>
                </div>
            
                <!-- Professional Information Section -->
                <div id="professional-info" class="info-content">
                    <div class="info-grid">
                        <div class="info-item">
                            <label>Employee ID</label>
                            <span id="employee-id">-</span>
                        </div>
                        <div class="info-item">
                            <label>Employee Type</label>
                            <span id="employee-type">-</span>
                        </div>

                        <div class="info-item">
                            <label>Company Email Address</label>
                            <span id="company-email">-</span>
                        </div>
                        <div class="info-item">
                            <label>Department</label>
                            <span id="department">-</span>
                        </div>

                        <div class="info-item">
                            <label>Designation</label>
                            <span id="designation">-</span>
                        </div>
                        <div class="info-item">
                            <label>Working Days</label>
                            <span id="working-days">-</span>
                        </div>

                        <div class="info-item">
                            <label>Working Hours</label>
                            <span id="working-hours">-</span>
                        </div>
                        <div class="info-item">
                            <label>Join Date</label>
                            <span id="join-date">-</span>
                        </div>

                        <div class="info-item">
                            <label>Contract Duration</label>
                            <span id="contract-duration">-</span>
                        </div>
                        <!-- Empty div to maintain grid alignment when office address is full-width -->
                        <div></div>

                        <!-- Full width item -->
                        <div class="info-item full-width">
                            <label>Office Address</label>
                            <span id="office-address">-</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Leave Tab Content - UNCHANGED, exactly as it was -->
            <div id="leave-tab" class="profile-tab-content">
                <div class="leave-header">
                    <div class="leave-controls">
                        <div class="sort-dropdown">
                            <label>Sort By:</label>
                            <select id="leave-sort">
                                <option value="latest">Latest</option>
                                <option value="oldest">Oldest</option>
                                <option value="status">Status</option>
                            </select>
                        </div>
                    </div>
                </div>
            
                <div class="leave-table-container">
                    <table class="leave-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Leave Type</th>
                                <th>From</th>
                                <th>To</th>
                                <th>Status</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="leave-history-tbody">
                            <!-- Leave history will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

    <!-- Back Button -->
    <div class="profile-footer">
        <button id="back-to-directory" class="back-btn">
            <i class="fas fa-arrow-left"></i> Back to Directory
        </button>
    </div>
</section>
    
    <!-- ✅ Add Employee Modal -->
    <div id="add-employee-modal" class="modal hidden">
        <form class="addEmployeeModal">
            <p class="Header-links">
                <a href="{% url 'employee_directory' %}" class="{% if request.resolver_match.url_name == 'employee_directory' %}active{% endif %}">Employee</a>
                <span class="arrow"> > </span>
                <a href="#" class="add-emp">Add Employee</a>
            </p>
        
            <div class="info-specification">
                <div id="tab-personal" class="active">
                    <i class="fas fa-user"></i>
                    <p>Personal Information</p>
                </div>
                <div id="tab-professional">
                    <i class="fas fa-briefcase"></i>
                    <p>Professional Information</p>
                </div>
            </div>
            <hr>
        
            <!-- Personal Section -->
            <div id="personal-section" class="tab-section active">
                <div class="photo-box">
                    <label for="profile-photo" class="photo-placeholder">📷</label>
                    <input type="file" id="profile-photo" style="display: none;">
                </div>
            
                <div class="input-row">
                    <input type="text" placeholder="First Name" class="input-third" required>
                    <input type="text" placeholder="Last Name" class="input-third" required>
                    <input type="text" placeholder="Mobile Number" class="input-third" required>
                </div>
            
                <div class="input-row">
                    <input type="email" placeholder="Email Address" class="input-third" required>
                    <input type="date" class="input-third" required>
                    <select class="input-third" required>
                        <option disabled selected>Marital Status</option>
                        <option>Single</option>
                        <option>Married</option>
                    </select>
                </div>
            
                <div class="input-row">
                    <select class="input-third" required>
                        <option disabled selected>Gender</option>
                        <option>Male</option>
                        <option>Female</option>
                    </select>
                    <select class="input-third" required>
                        <option disabled selected>Nationality</option>
                        <option>Nigerian</option>
                        <option>Other</option>
                    </select>
                </div>
            
                <input type="text" class="input-fourth" placeholder="Enter Address" required>
            
                <div class="input-row">
                    <select class="input-half" required>
                        <option disabled selected>State</option>
                        <option>Lagos</option>
                        <option>Abuja</option>
                    </select>
                    <input type="text" placeholder="City" class="input-half" required>
                </div>
            
                <div class="btn-container">
                    <button type="reset" class="cls-btn close-modal">Cancel</button>
                    <button type="button" class="add-btn" id="next-btn">Next</button>
                </div>
            </div>
        
            <!-- Professional Section -->
            <div id="professional-section" class="tab-section">
                <div class="input-row">
                    <select class="input-third" required>
                        <option disabled selected>Select Employee Type</option>
                        <option>Full-Time</option>
                        <option>Part-Time</option>
                        <option>Contract</option>
                    </select>
                    <input type="text" placeholder="Contract Length" class="input-third" required>
                    <input type="email" placeholder="Company Email Address" class="input-third" required>
                </div>
            
                <div class="input-row">
                    <select class="input-half" required>
                        <option disabled selected>Select Department</option>
                        <option>HR</option>
                        <option>Engineering</option>
                    </select>
                    <input type="text" placeholder="Enter Designation" class="input-half" required>
                </div>
            
                <div class="input-row">
                    <select class="input-third" required>
                        <option disabled selected>Select Working Days</option>
                        <option>Mon - Fri</option>
                        <option>Mon - Sat</option>
                    </select>
                    <input type="text" placeholder="Working Hours" class="input-third" required>
                    <input type="date" class="input-third" required>
                </div>
            
                <input type="text" class="input-fourth" placeholder="Enter Office Location" required>
            
                <div class="btn-container">
                    <button type="reset" class="cls-btn close-modal">Cancel</button>
                    <button type="submit" class="add-btn">Add</button>
                </div>
            </div>
        </form>
    </div>

</div>
{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/employee_directory.js' %}" defer></script>
    <script src="{% static 'js/all.min.js' %}" defer></script>
{% endblock %}
